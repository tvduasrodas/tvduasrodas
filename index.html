<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>TVDUASRODAS.com | Not√≠cias, motos, testes e tecnologia duas rodas</title>

    <meta name="description" content="Portal brasileiro especializado em motos, scooters, bicicletas e tecnologia duas rodas. Not√≠cias, lan√ßamentos, testes e v√≠deos." />

    <meta name="robots" content="index, follow" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta charset="UTF-8" />


    <!-- Favicons -->
    <link rel="icon" href="assets/img/logoTVicon_web.ico" type="image/x-icon" />
    <link rel="icon" type="image/png" sizes="32x32" href="assets/img/logoTVicon_web_32x32.png" />
    <link rel="icon" type="image/png" sizes="128x128" href="assets/img/logoTVicon_web_128x128.png" />

    <!-- CSS -->
    <link rel="stylesheet" href="assets/css/style.css" />
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9816256933405795"
            crossorigin="anonymous"></script>

    <!-- Ads -->
    <script data-cfasync="false" src="https://cmp.gatekeeperconsent.com/min.js"></script>
    <script data-cfasync="false" src="https://the.gatekeeperconsent.com/cmp.min.js"></script>
    <script async src="//www.ezojs.com/ezoic/sa.min.js"></script>
    <script>
        window.ezstandalone = window.ezstandalone || {};
        ezstandalone.cmd = ezstandalone.cmd || [];
    </script>
    <!-- End Ads -->

</head>
<body class="page-home">
    <!-- BARRA TOPO (AN√öNCIO) -->
    <div class="ad-bar">
        <!-- ADS -->        
        <!-- END ADS -->
    </div>

    <!-- HEADER -->
    <header class="site-header">
        <div class="container header-inner">
            <!-- LOGO -->
            <div class="logo-wrapper">
                <a href="index.html" class="logo-link">
                    <img src="assets/img/logotv.png" alt="TV Duas Rodas" class="logo-image" />
                </a>
                <div class="brand-sub">
                    Motos ¬∑ Bikes ¬∑ Scooters ¬∑ El√©tricos
                </div>
            </div>

            <!-- NAV -->
            <nav class="main-nav">
                <ul>
                    <li><a href="index.html" class="active">In√≠cio</a></li>
                    <li><a href="revista.html">Revista</a></li>
                    <li><a href="tv.html">TV &amp; V√≠deos</a></li>
                    <li><a href="imprensa.html">Imprensa</a></li>
                    <li><a href="contato.html">Contato &amp; Patroc√≠nios</a></li>
                </ul>
            </nav>

            <!-- BUSCA GLOBAL -->
            <form class="site-search" action="busca.html" method="get">
                <div class="site-search-field">
                    <span class="search-icon" aria-hidden="true">üîç</span>

                    <input type="search"
                           id="siteSearchInput"
                           name="q"
                           placeholder="Buscar no site..."
                           aria-label="Buscar no site" />

                    <button type="button"
                            id="siteSearchClear"
                            class="site-search-clear"
                            aria-label="Limpar busca">
                        √ó
                    </button>
                </div>
            </form>



            <!-- REDES -->
            <div class="social-header">
                <a href="https://www.youtube.com/@tvduasrodas?sub_confirmation=1" class="social-icon">YT</a>
                <a href="https://www.instagram.com/tvduasrodasofc" class="social-icon">IG</a>
            </div>
        </div>
    </header>


    <!-- HERO: DESTAQUE + TV AO VIVO / PRINCIPAL -->
    <main>
        <section class="hero hero-portal">
            <div class="hero-bg"></div>
            <div class="container hero-grid">
                <!-- Destaque Revista -->
                <article class="hero-article">
                    <span class="label">Mat√©ria em destaque</span>
                    <h1>
                        O universo das <span>duas rodas</span> em uma revista eletr√¥nica e um canal de v√≠deo.
                    </h1>
                    <p>
                        Not√≠cias, testes, viagens, bastidores de oficina, gadgets, eletr√¥nica e muito mais.
                        Um hub completo para quem vive motos, bikes, scooters e el√©tricos.
                    </p>
                    <div class="hero-actions">
                        <a href="revista.html" class="btn btn-primary">Ler mat√©rias</a>
                        <a href="tv.html" class="btn btn-ghost">Ir para TV &amp; V√≠deos</a>
                    </div>

                    <ul class="hero-meta">
                        <li>Reviews e testes</li>
                        <li>Trips &amp; rol√™s</li>
                        <li>Conte√∫do t√©cnico &amp; lifestyle</li>
                    </ul>
                </article>

                <!-- Bloco TV -->
                <aside class="hero-tv">
                    <div class="hero-tv-header">
                        <span class="label">TV Duas Rodas</span>
                    </div>

                    <!-- Player principal (YouTube embed) -->
                    <div class="video-embed-wrapper">
                        <!-- Substitua o src pelo ID do seu v√≠deo oficial -->
                        <iframe src="https://www.youtube.com/embed/VIDEO_ID?autoplay=1&mute=1&playsinline=1"
                                title="TV Duas Rodas"
                                frameborder="0"
                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                                allowfullscreen
                                loading="lazy">
                        </iframe>
                    </div>

                    <!-- √Årea Live (placeholder) -->
                    <div class="live-box">
                        <div class="live-info">
                            <span class="live-label">Live Stream</span>
                            <span class="live-status live-status-off">Offline</span>
                        </div>
                        <p class="live-message">
                            Quando estivermos ao vivo, este espa√ßo ser√° ocupado pela transmiss√£o
                            em tempo real (YouTube Live, Twitch ou outro player).
                        </p>
                        <a class="btn btn-small btn-outline live-cta"
                           href="#"
                           target="_blank"
                           rel="noopener"
                           style="display: none;">
                            Assistir √† transmiss√£o
                        </a>
                    </div>

                </aside>
            </div>
        </section>

        <!-- BLOCO DE AN√öNCIOS / PATROCINADORES -->
        <section class="section section-ads">
            <div class="container ads-strip"></div>
        </section>



        <!-- REVISTA: √öLTIMAS MAT√âRIAS -->
        <section class="section">
            <div class="container">
                <header class="section-header">
                    <h2>√öltimas da revista</h2>
                    <p>Mat√©rias recentes publicadas na TV Duas Rodas.</p>
                </header>

                <!-- AQUI O GRID DIN√ÇMICO -->
                <div id="latest-articles-grid" class="grid article-grid">
                    <p>Carregando mat√©rias...</p>
                </div>
            </div>
        </section>


        <!-- LATEST VIDEOS -->
        <section class="latest-videos-section">
            <div class="container">
                <header class="section-header align-left">
                    <h2>√öltimos v√≠deos</h2>
                    <p>Confira os v√≠deos mais recentes da TVDUASRODAS direto do canal.</p>
                </header>

                <!-- Usa o mesmo grid de v√≠deos em destaque -->
                <div id="latest-videos-grid" class="grid video-grid">
                    <p>Carregando v√≠deos...</p>
                </div>
            </div>
        </section>


        <!-- V√çDEOS EM DESTAQUE NA HOME -->
        <section class="section">
            <div class="container">
                <header class="section-header">
                    <h2>V√≠deos em destaque</h2>
                    <p>
                        √öltimos v√≠deos e cortes da TV Duas Rodas. Para ver a grade completa,
                        acesse a √°rea de TV &amp; V√≠deos.
                    </p>
                </header>

                <div id="featured-videos-grid" class="grid video-grid">
                    <p>Carregando v√≠deos em destaque...</p>
                </div>

                <div style="text-align:center; margin-top:18px;">
                    <a href="tv.html" class="btn btn-outline btn-small">
                        Ir para a p√°gina de TV &amp; V√≠deos
                    </a>
                </div>
            </div>
        </section>


        <!-- SE√á√ÉO SOCIAL / REDE SOCIAIS -->
        <section class="section section-alt">
            <div class="container social-section">
                <header class="section-header">
                    <h2>TV Duas Rodas nas redes</h2>
                    <p>Clipes r√°pidos, bastidores, teasers e cortes exclusivos.</p>
                </header>

                <div class="social-grid">
                    <div class="social-card">
                        <h3>YouTube</h3>
                        <p>Inscreva-se no canal para assistir epis√≥dios completos.</p>
                        <a href="https://www.youtube.com/@tvduasrodas?sub_confirmation=1" class="btn btn-primary btn-small">Ir para o canal</a>
                    </div>

                    <div class="social-card">
                        <h3>Instagram</h3>
                        <p>Fotos, stories, bastidores de grava√ß√µes e bastantes reels.</p>
                        <a href="https://www.instagram.com/tvduasrodasofc" class="btn btn-ghost btn-small">Ver perfil</a>
                    </div>

                    <div class="social-card">
                        <h3>Collab</h3>
                        <p>Colabore com o Canal ajude nos a criar conte√∫do de qualidade</p>
                        <a href="contato.html" class="btn btn-ghost btn-small">Collab</a>
                    </div>
                </div>

                <!-- Exemplo simples de embed (opcional): feed do YouTube -->
                <p class="social-note">
                    A primeira WEBTV especializada no mundo das duas rodas.
                </p>
            </div>
        </section>
    </main>

    <!-- FOOTER COM AN√öNCIO -->
    <footer class="site-footer">
        <div class="container footer-inner">
            <div class="footer-left">
                <p>¬© <span>TV Duas Rodas</span> ‚Äì todos os direitos reservados.</p>
                <p class="footer-small">
                    Revista eletr√¥nica &amp; canal de v√≠deo dedicado √†s duas rodas.
                </p>
            </div>

            <p class="footer-links">
                <a href="sobre.html">Sobre</a> ¬∑
                <a href="politica-de-privacidade.html">Pol√≠tica de Privacidade</a> ¬∑
                <a href="termos.html">Termos de Uso</a>
            </p>
        </div>
    </footer>

    <!-- JS -->
    <script src="assets/js/main.js"></script>
    <script>
        // CONFIGURE AQUI:
        const GITHUB_OWNER = "tvduasrodas";
        const GITHUB_REPO = "tvduasrodas";
        const GITHUB_BRANCH = "main"; // ou "master", se seu repo usar esse nome

        // caminhos no reposit√≥rio
        const VIDEOS_PATH = "content/videos";
        const LIVE_CONFIG_FILE = "content/home/live-status.md";
        const HOME_CONFIG_FILE = "content/home/hero-player.md";

        // URLs da API do GitHub
        const GITHUB_API_URL = `https://api.github.com/repos/${GITHUB_OWNER}/${GITHUB_REPO}/contents/${VIDEOS_PATH}?ref=${GITHUB_BRANCH}`;
        const cacheBust = Date.now();

        const LIVE_CONFIG_API_URL =
            `https://api.github.com/repos/${GITHUB_OWNER}/${GITHUB_REPO}/contents/${LIVE_CONFIG_FILE}?ref=${GITHUB_BRANCH}&cb=${cacheBust}`;
        const HOME_CONFIG_API_URL = `https://api.github.com/repos/${GITHUB_OWNER}/${GITHUB_REPO}/contents/${HOME_CONFIG_FILE}?ref=${GITHUB_BRANCH}`;


        // L√™ frontmatter YAML simples do topo do .md
        function parseFrontmatter(text) {
            const result = {
                title: "",
                date: "",
                youtube_url: "",
                thumbnail: "",
                category: "",
                featured: false,
                body: "",
            };

            if (!text.startsWith("---")) {
                result.body = text.trim();
                return result;
            }

            const second = text.indexOf("---", 3);
            if (second === -1) {
                result.body = text.trim();
                return result;
            }

            const fmRaw = text.slice(3, second).trim();
            const body = text.slice(second + 3).trim();
            result.body = body;

            fmRaw.split("\n").forEach((line) => {
                const [key, ...rest] = line.split(":");
                if (!key || !rest.length) return;
                const k = key.trim();
                let v = rest.join(":").trim();

                // remove aspas simples ou duplas no come√ßo/fim: "valor", 'valor', '' etc.
                v = v.replace(/^['"]|['"]$/g, "");

                if (k === "title") result.title = v;
                else if (k === "date") result.date = v;
                else if (k === "youtube_url" || k === "youtube") result.youtube_url = v;
                // alias: tanto "thumbnail" quanto "cover" viram thumbnail
                else if (k === "thumbnail" || k === "cover") result.thumbnail = v;
                else if (k === "category") result.category = v;
                else if (k === "featured") result.featured = v === "true";
                else if (k === "videoId") result.videoId = v;

            });

            return result;
        }

        // Converte string de data do frontmatter em Date segura
        function parseDateSafe(str) {
            const d = new Date(str);
            return isNaN(d.getTime()) ? new Date(0) : d;
        }

        function formatArticleDateLabel(str) {
            if (!str) return "";
            const d = new Date(str);
            if (isNaN(d.getTime())) {
                return str;
            }
            const meses = ["jan", "fev", "mar", "abr", "mai", "jun", "jul", "ago", "set", "out", "nov", "dez"];
            const dia = String(d.getDate()).padStart(2, "0");
            const mes = meses[d.getMonth()];
            const ano = d.getFullYear();
            return `${dia} ${mes} ${ano}`;
        }


        function extractYouTubeId(url) {
            if (!url) return "";
            try {
                const u = new URL(url);
                if (u.hostname.includes("youtu.be")) {
                    return u.pathname.replace("/", "");
                }
                if (u.searchParams.has("v")) {
                    return u.searchParams.get("v");
                }
                // formato /embed/ID
                const parts = u.pathname.split("/");
                const idx = parts.indexOf("embed");
                if (idx !== -1 && parts[idx + 1]) {
                    return parts[idx + 1];
                }
            } catch (e) {
                // se n√£o for URL v√°lida, tenta heur√≠stica simples
                if (url.length === 11 && !url.includes(" ")) return url;
            }
            return "";
        }

        async function loadLiveStatusFromConfig() {
            const liveBox = document.querySelector(".live-box");
            if (!liveBox) return;

            const labelEl = liveBox.querySelector(".live-label");
            const statusEl = liveBox.querySelector(".live-status");
            const messageEl = liveBox.querySelector(".live-message");
            const ctaEl = liveBox.querySelector(".live-cta");

            try {
                const res = await fetch(LIVE_CONFIG_API_URL);
                if (!res.ok) {
                    console.warn("Config da live n√£o encontrada ou inacess√≠vel:", res.status);
                    return;
                }

                const fileMeta = await res.json();
                if (!fileMeta.download_url) {
                    console.warn("Config da live sem download_url.");
                    return;
                }

                const rawRes = await fetch(fileMeta.download_url);
                const rawText = await rawRes.text();

                const data = parseFrontmatter(rawText);

                // Usamos 'featured' como flag de "ao vivo"
                const isLive = !!data.featured;
                const title = data.title || "Live Stream";
                const liveUrl = data.youtube_url || "";
                const fallbackOfflineMsg =
                    "Quando estivermos ao vivo, este espa√ßo ser√° ocupado pela transmiss√£o em tempo real (YouTube Live, Twitch ou outro player).";

                const message = data.body || fallbackOfflineMsg;

                if (labelEl) {
                    labelEl.textContent = title;
                }

                if (isLive) {
                    if (statusEl) {
                        statusEl.textContent = "Ao vivo";
                        statusEl.classList.remove("live-status-off");
                        statusEl.classList.add("live-status-on");
                    }

                    if (messageEl) {
                        messageEl.textContent = message || "Estamos ao vivo agora!";
                    }

                    if (ctaEl && liveUrl) {
                        ctaEl.style.display = "inline-flex";
                        ctaEl.setAttribute("href", liveUrl);
                    } else if (ctaEl) {
                        ctaEl.style.display = "none";
                    }
                } else {
                    if (statusEl) {
                        statusEl.textContent = "Offline";
                        statusEl.classList.remove("live-status-on");
                        statusEl.classList.add("live-status-off");
                    }

                    if (messageEl) {
                        messageEl.textContent = message || fallbackOfflineMsg;
                    }

                    if (ctaEl) {
                        ctaEl.style.display = "none";
                    }
                }
            } catch (err) {
                console.error("Erro ao carregar status da live:", err);
            }
        }


        async function loadHeroPlayerFromConfig() {
            const iframe = document.querySelector(".video-embed-wrapper iframe");
            if (!iframe) return;

            try {
                const res = await fetch(HOME_CONFIG_API_URL);
                if (!res.ok) {
                    console.warn("Config da Home n√£o encontrada ou inacess√≠vel:", res.status);
                    return;
                }

                const fileMeta = await res.json();
                if (!fileMeta.download_url) {
                    console.warn("Config da Home sem download_url.");
                    return;
                }

                const rawRes = await fetch(fileMeta.download_url);
                const rawText = await rawRes.text();

                const data = parseFrontmatter(rawText);

                const youtubeUrl = data.youtube_url || data.youtube || "";
                const videoId = extractYouTubeId(youtubeUrl);

                if (videoId) {
                    const params = "?autoplay=1&mute=1&playsinline=1";
                    iframe.src = `https://www.youtube.com/embed/${videoId}${params}`;
                }

                if (data.title) {
                    iframe.title = data.title;
                }
            } catch (err) {
                console.error("Erro ao carregar config da Home:", err);
            }
        }


        function makeExcerpt(body, maxLen = 180) {
            if (!body) return "Clique para assistir ao v√≠deo.";
            // tira alguns caracteres t√≠picos de markdown
            const clean = body.replace(/[#*_`>-]/g, "").trim();
            if (clean.length <= maxLen) return clean;
            return clean.slice(0, maxLen).trim() + "...";
        }


        async function loadLatestVideos() {
            const grid = document.getElementById("latest-videos-grid");
            if (!grid) return;

            try {
                const res = await fetch(GITHUB_API_URL);
                if (!res.ok) {
                    throw new Error("Erro ao listar v√≠deos: " + res.status);
                }

                const files = await res.json();
                const mdFiles = files.filter((f) => f.type === "file" && f.name.endsWith(".md"));

                // Buscar conte√∫do de cada .md
                const videoPromises = mdFiles.map(async (file) => {
                    const rawRes = await fetch(file.download_url);
                    const rawText = await rawRes.text();
                    const data = parseFrontmatter(rawText);

                    return {
                        ...data,
                        // Para seguran√ßa, guarda date como Date mesmo
                        _dateObj: parseDateSafe(data.date),
                    };
                });

                let videos = await Promise.all(videoPromises);

                // Ordenar por data desc (mais novos primeiros)
                videos.sort((a, b) => b._dateObj - a._dateObj);

                // Pegar s√≥ os 3 primeiros
                videos = videos.slice(0, 3);

                if (!videos.length) {
                    grid.innerHTML = "<p>Nenhum v√≠deo encontrado ainda.</p>";
                    return;
                }

                const cardsHTML = videos
                    .map((video) => {
                        const title = video.title || "V√≠deo sem t√≠tulo";
                        const youtubeUrl = video.youtube_url || "";
                        const thumb = video.thumbnail || "";
                        const body = video.body || "";
                        const videoId = extractYouTubeId(youtubeUrl);
                        // se tiver ID, manda pra tv.html?v=ID. Sen√£o, cai no YouTube direto.
                        const watchUrl = videoId
                            ? `tv.html?v=${videoId}`
                            : (youtubeUrl || "#");

                        // Ajusta o caminho da thumbnail (se n√£o come√ßar com /)
                        let thumbSrc = thumb;
                        if (thumb && !thumb.startsWith("http") && !thumb.startsWith("/")) {
                            thumbSrc = "/" + thumb.replace(/^\.?\//, "");
                        }

                        const excerpt = makeExcerpt(body);

                        return `
              <article class="video-card">
                <a href="${watchUrl}">
                  <div class="video-thumb real-thumb">
                    ${thumbSrc
                                ? `<img src="${thumbSrc}" alt="${title}">`
                                : ""
                            }
                  </div>
                  <div class="card" style="margin-top: 8px;">
                    <h3>${title}</h3>
                    <p>${excerpt}</p>
                    <span class="article-link">Assistir &rarr;</span>
                  </div>
                </a>
              </article>
            `;
                    })
                    .join("");


                grid.innerHTML = cardsHTML;
            } catch (err) {
                console.error(err);
                grid.innerHTML =
                    "<p>N√£o foi poss√≠vel carregar os v√≠deos agora. Tente novamente mais tarde.</p>";
            }
        }

        async function loadFeaturedVideos() {
            const grid = document.getElementById("featured-videos-grid");
            if (!grid) return;

            try {
                const res = await fetch(GITHUB_API_URL);
                if (!res.ok) {
                    throw new Error("Erro ao listar v√≠deos: " + res.status);
                }

                const files = await res.json();
                const mdFiles = files.filter((f) => f.type === "file" && f.name.endsWith(".md"));

                // Buscar conte√∫do de cada .md
                const videoPromises = mdFiles.map(async (file) => {
                    const rawRes = await fetch(file.download_url);
                    const rawText = await rawRes.text();

                    const data = parseFrontmatter(rawText);

                    return {
                        ...data,
                        _dateObj: parseDateSafe(data.date),
                    };
                });

                let videos = await Promise.all(videoPromises);

                // üîπ Filtrar s√≥ os marcados como destaque no frontmatter (featured: true)
                videos = videos.filter((v) => v.featured === true);

                // Ordenar por data desc (mais novos / populares primeiro)
                videos.sort((a, b) => b._dateObj - a._dateObj);

                // üîπ Mostrar s√≥ 3 v√≠deos em destaque
                videos = videos.slice(0, 3);

                if (!videos.length) {
                    grid.innerHTML = "<p>Nenhum v√≠deo em destaque configurado ainda.</p>";
                    return;
                }

                const cardsHTML = videos
                    .map((video) => {
                        const title = video.title || "V√≠deo sem t√≠tulo";
                        const youtubeUrl = video.youtube_url || "";
                        const thumb = video.thumbnail || "";
                        const body = video.body || "";
                        const videoId = extractYouTubeId(youtubeUrl);

                        const watchUrl = videoId ? `tv.html?v=${videoId}` : (youtubeUrl || "#");

                        let thumbSrc = thumb;
                        if (thumb && !thumb.startsWith("http") && !thumb.startsWith("/")) {
                            thumbSrc = "/" + thumb.replace(/^\.?\//, "");
                        }

                        const excerpt = makeExcerpt(body);

                        return `
                  <article class="video-card">
                    <a href="${watchUrl}">
                      <div class="video-thumb real-thumb">
                        ${thumbSrc ? `<img src="${thumbSrc}" alt="${title}">` : ""}
                      </div>
                      <div class="card" style="margin-top: 8px;">
                        <h3>${title}</h3>
                        <p>${excerpt}</p>
                        <span class="article-link">Assistir &rarr;</span>
                      </div>
                    </a>
                  </article>
                `;
                    })
                    .join("");

                grid.innerHTML = cardsHTML;
            } catch (err) {
                console.error(err);
                grid.innerHTML =
                    "<p>N√£o foi poss√≠vel carregar os v√≠deos em destaque agora. Tente novamente mais tarde.</p>";
            }
        }


        // Caminho das mat√©rias no seu repo (ajuste se for outro)
        const ARTICLES_PATH = "content/news"; // ou "content/articles", "content/posts" etc.
        const GITHUB_ARTICLES_API_URL =
            `https://api.github.com/repos/${GITHUB_OWNER}/${GITHUB_REPO}/contents/${ARTICLES_PATH}?ref=${GITHUB_BRANCH}`;

        async function loadLatestArticles() {
            const grid = document.getElementById("latest-articles-grid");
            if (!grid) return;

            try {
                const res = await fetch(GITHUB_ARTICLES_API_URL);
                if (!res.ok) {
                    throw new Error("Erro ao listar mat√©rias: " + res.status);
                }

                const files = await res.json();

                // S√≥ arquivos .md dentro de /content/news
                const mdFiles = files.filter(
                    (f) => f.type === "file" && f.name.endsWith(".md")
                );

                const articlePromises = mdFiles.map(async (file) => {
                    const rawRes = await fetch(file.download_url);
                    const rawText = await rawRes.text();

                    const data = parseFrontmatter(rawText);

                    return {
                        ...data,
                        _dateObj: parseDateSafe(data.date),
                        _fileSlug: file.name.replace(/\.md$/, "")
                    };
                });

                let articles = await Promise.all(articlePromises);

                // Ordenar da mais nova pra mais antiga
                articles.sort((a, b) => b._dateObj - a._dateObj);

                // Pegar s√≥ 4 pra Home
                articles = articles.slice(0, 4);

                if (!articles.length) {
                    grid.innerHTML = "<p>Nenhuma mat√©ria publicada ainda.</p>";
                    return;
                }

                const cardsHTML = articles
                    .map((article) => {
                        const slug = article.slug || article._fileSlug;
                        const title = article.title || "Mat√©ria sem t√≠tulo";
                        const category = article.category || "Not√≠cias";

                        const summary =
                            article.summary ||
                            makeExcerpt(article.body || "", 180);

                        const dateLabel = formatArticleDateLabel(article.date);

                        // üëâ Imagem do card:
                        // 1) se tiver thumbnail/cover ‚Üí usa essa
                        // 2) sen√£o, se tiver videoId ‚Üí usa thumb do YouTube
                        let imgSrc = "";
                        if (article.thumbnail) {
                            imgSrc = article.thumbnail;
                        } else if (article.videoId) {
                            const cleanId = article.videoId.replace(/^['"]+|['"]+$/g, "").trim();
                            if (cleanId) {
                                imgSrc = `https://img.youtube.com/vi/${cleanId}/hqdefault.jpg`;
                            }
                        }

                        const articleUrl = `materia.html?slug=${encodeURIComponent(slug)}`;

                        return `
                  <article class="card article-card">
                    <a href="${articleUrl}">
                      ${imgSrc
                                ? `
                      <div class="article-thumb real-thumb">
                        <img src="${imgSrc}" alt="${title}">
                      </div>
                      `
                                : ""
                            }
                      <span class="category-tag">${category}</span>
                      ${dateLabel
                                ? `<span class="article-date">${dateLabel}</span>`
                                : ""
                            }
                      <h3>${title}</h3>
                      <p>${summary}</p>
                      <span class="article-link">Ler mat√©ria &rarr;</span>
                    </a>
                  </article>
                `;
                    })
                    .join("");

                grid.innerHTML = cardsHTML;
            } catch (err) {
                console.error(err);
                grid.innerHTML =
                    "<p>N√£o foi poss√≠vel carregar as mat√©rias agora. Tente novamente mais tarde.</p>";
            }
        }


        function parseArticleDate(dateStr) {
            if (!dateStr) return new Date(0);

            // tenta parse normal primeiro (caso mude o formato no futuro)
            const direct = new Date(dateStr);
            if (!isNaN(direct.getTime())) return direct;

            // formato: "23 jan 2026"
            const parts = dateStr.toLowerCase().trim().split(/\s+/);
            if (parts.length < 3) return new Date(0);

            const day = parseInt(parts[0], 10);
            const monthStr = parts[1].slice(0, 3); // jan, fev, mar...
            const year = parseInt(parts[2], 10);

            const months = {
                jan: 0,
                fev: 1,
                mar: 2,
                abr: 3,
                mai: 4,
                jun: 5,
                jul: 6,
                ago: 7,
                set: 8,
                out: 9,
                nov: 10,
                dez: 11
            };

            const month = months[monthStr];

            if (isNaN(day) || isNaN(year) || month === undefined) {
                return new Date(0);
            }

            return new Date(year, month, day);
        }


        loadHeroPlayerFromConfig();
        loadLiveStatusFromConfig(); // se voc√™ estiver usando
        loadLatestVideos();
        loadFeaturedVideos();
        loadLatestArticles();




    </script>


</body>
</html>
